HASH 
=========================

本文将介绍HASH函数使用方式。

描述 
-----------------------

* 若分库和分表使用不同拆分键进行HASH时，则根据分库键的键值直接按分库数取余。如果键值是字符串，则字符串会先被换算成哈希值再进行路由计算。例如HASH(8)等价于8%D（D是分库数目）, 而HASH("ABC")等价于hashcode("ABC").abs()%D（D是分库数目）。

  

* 若分库和分表都使用同一个拆分键进行HASH时，则根据拆分键的键值按总的分表数取余。例如有2个分库，每个分库4张分表，那么0库上保存分表0\~3，1库上保存分表4\~7。某个键值为15，那么根据该路由方式，则该键值15将被分到1库的表7上（（15 % (2 \* 4) =7））。

  




注意事项 
-------------------------

HASH函数要求拆分列的值的自身分布均衡才能保证哈希均衡。

使用限制 
-------------------------

拆分键的数据类型必须是整数类型或字符串类型。

使用场景 
-------------------------

HASH函数主要适用于如下场景：

* 需要按用户ID或订单ID进行分库的场景；

* 拆分键是字符串类型的场景。




**示例**

假设需要对ID列按HASH函数进行分库不分表，则您可以使用如下DDL语句进行建表：

```sql
create table test_hash_tb (
    id int,
    name varchar(30) DEFAULT NULL,  
    create_time datetime DEFAULT NULL,
    primary key(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 dbpartition by HASH(ID);     
```


