日期时间函数 
===========================

本文介绍了PolarDB-X支持的日期时间函数。

支持函数 
-------------------------

PolarDB-X支持如下日期时间函数：


|                函数名                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                 示例                                                                                                                                                                                                                                                  |
|-----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ADDDATE(d,n)                      | 计算起始日期d加上n天的日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `SELECT ADDDATE("2017-06-15", INTERVAL 10 DAY); ` 返回： `->2017-06-25`                                                                                                                                                                                                                                                                                                                                                                                           |
| ADDTIME(t,n)                      | n是一个时间表达式，时间t加上时间表达式n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | * 加5秒：`SELECT ADDTIME('2011-11-11 11:11:11', 5); ` 返回： `->2011-11-11 11:11:16 (秒)`   * 添加 2 小时10 分钟5 秒：`SELECT ADDTIME("2020-06-15 09:34:21", "2:10:5"); ` 返回： `-> 2020-06-15 11:44:26`                                                                                                                                      |
| CURDATE()                         | 返回当前日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT CURDATE();` 返回： `-> 2018-09-19`                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CURRENT_DATE()                    | 返回当前日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT CURRENT_DATE(); ` 返回： `-> 2018-09-19`                                                                                                                                                                                                                                                                                                                                                                                                                  |
| CURRENT_TIME()                    | 返回当前时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT CURRENT_TIME();` 返回： `-> 19:59:02`                                                                                                                                                                                                                                                                                                                                                                                                                     |
| CURRENT_TIMESTAMP()               | 返回当前日期和时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT CURRENT_TIMESTAMP();` 返回： `-> 2018-09-19 20:57:43`                                                                                                                                                                                                                                                                                                                                                                                                     |
| CURTIME()                         | 返回当前时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT CURTIME(); ` 返回： `-> 19:59:02`                                                                                                                                                                                                                                                                                                                                                                                                                         |
| DATE()                            | 从日期或日期时间表达式中提取日期值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `SELECT DATE("2017-06-15");` 返回： `-> 2017-06-15`                                                                                                                                                                                                                                                                                                                                                                                                               |
| DATEDIFF(d1,d2)                   | 计算日期d1和d2之间相隔的天数                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `SELECT DATEDIFF('2001-01-01','2001-02-02'); ` 返回： `-> -32`                                                                                                                                                                                                                                                                                                                                                                                                    |
| DATE_ADD(d，INTERVAL expr type)    | 计算起始日期d加上一个时间段后的日期，type值可以是： <ul><li>* MICROSECOND</li>  <li>* SECOND</li>  <li>* MINUTE</li>  <li>* HOUR</li>  <li>* DAY</li>  <li>* WEEK</li>  <li>* MONTH</li>  <li>* QUARTER</li>  <li>* YEAR</li>  <li>* SECOND_MICROSECOND</li>  <li>* MINUTE_MICROSECOND</li>  <li>* MINUTE_SECOND</li>  <li>* HOUR_MICROSECOND</li>  <li>* HOUR_SECOND</li>  <li>* HOUR_MINUTE</li>  <li>* DAY_MICROSECOND</li>  <li>* DAY_SECOND</li>  <li>* DAY_MINUTE</li>  <li>* DAY_HOUR</li>  <li>* YEAR_MONTH</li></ul>                        | * `SELECT DATE_ADD("2017-06-15", INTERVAL 10 DAY);` 返回： `-> 2017-06-25`   * `SELECT DATE_ADD("2017-06-15 09:34:21", INTERVAL 15 MINUTE);` `-> 2017-06-15 09:49:21`   * `SELECT DATE_ADD("2017-06-15 09:34:21", INTERVAL -3 HOUR);` 返回： `->2017-06-15 06:34:21`    |
| DATE_FORMAT(d,f)                  | 按表达式f的要求显示日期d                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `SELECT DATE_FORMAT('2011-11-11 11:11:11','%Y-%m-%d %r');` 返回： `-> 2011-11-11 11:11:11 AM`                                                                                                                                                                                                                                                                                                                                                                     |
| DATE_SUB(date,INTERVAL expr type) | 函数从日期减去指定的时间间隔                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Orders表中OrderDate字段减去2天： `SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders`                                                                                                                                                                                                                                                                                                                                                                                            |
| DAY(d)                            | 返回日期值d的日期部分                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `SELECT DAY("2017-06-15"); ` 返回： `-> 15`                                                                                                                                                                                                                                                                                                                                                                                                                       |
| DAYNAME(d)                        | 返回日期d是星期几，如Monday，Tuesday                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT DAYNAME('2011-11-11 11:11:11');` 返回： `->Friday`                                                                                                                                                                                                                                                                                                                                                                                                        |
| DAYOFMONTH(d))                    | 计算日期d是本月的第几天                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `SELECT DAYOFMONTH('2011-11-11 11:11:11');` 返回： `->11`                                                                                                                                                                                                                                                                                                                                                                                                         |
| DAYOFWEEK(d)                      | 日期d今天是星期几，1 星期日，2 星期一，以此类推                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SELECT DAYOFMONTH('2011-11-11 11:11:11');` 返回： `->6`                                                                                                                                                                                                                                                                                                                                                                                                          |
| DAYOFYEAR(d)                      | 计算日期d是本年的第几天                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `SELECT DAYOFMONTH('2011-11-11 11:11:11');` 返回： `->315`                                                                                                                                                                                                                                                                                                                                                                                                        |
| EXTRACT(type FROM d)              | 从日期d中获取指定的值，type指定返回的值。 type可取值为： <ul><li>* MICROSECOND</li>  <li>* SECOND</li>  <li>* MINUTE</li>  <li>* HOUR</li>  <li>* DAY</li>  <li>* WEEK</li>  <li>* MONTH</li>  <li>* QUARTER</li>  <li>* YEAR</li>  <li>* SECOND_MICROSECOND</li>  <li>* MINUTE_MICROSECOND</li>  <li>* MINUTE_SECOND</li>  <li>* HOUR_MICROSECOND</li>  <li>* HOUR_SECOND</li>  <li>* HOUR_MINUTE</li>  <li>* DAY_MICROSECOND</li>  <li>* DAY_SECOND</li>  <li>* DAY_MINUTE</li>  <li>* DAY_HOUR</li>  <li>* YEAR_MONTH</li></ul>   | `SELECT DAYOFMONTH('2011-11-11 11:11:11');` 返回： `->11`                                                                                                                                                                                                                                                                                                                                                                                                         |
| FROM_DAYS(n)                      | 计算从0000年1月1日开始n天后的日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `SELECT FROM_DAYS(1111)` 返回： `-> 0003-01-16`                                                                                                                                                                                                                                                                                                                                                                                                                   |
| HOUR(t)                           | 返回t中的小时值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SELECT HOUR('1:2:3')` 返回： `-> 1`                                                                                                                                                                                                                                                                                                                                                                                                                              |
| LAST_DAY(d)                       | 返回给定日期的那一月份的最后一天                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `SELECT LAST_DAY("2017-06-20"); ` 返回： `-> 2017-06-30`                                                                                                                                                                                                                                                                                                                                                                                                          |
| LOCALTIME()                       | 返回当前日期和时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT LOCALTIME()` 返回： `-> 2018-09-19 20:57:43`                                                                                                                                                                                                                                                                                                                                                                                                              |
| LOCALTIMESTAMP()                  | 返回当前日期和时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT LOCALTIMESTAMP()` 返回： `-> 2018-09-19 20:57:43`                                                                                                                                                                                                                                                                                                                                                                                                         |
| MAKEDATE(year, day-of-year)       | 基于给定年份year和所在年中的天数序号day-of-year返回一个日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `SELECT MAKEDATE(2017, 3);` 返回： `-> 2017-01-03`                                                                                                                                                                                                                                                                                                                                                                                                                |
| MAKETIME(hour, minute, second)    | 组合时间，参数分别为小时、分钟、秒                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `SELECT MAKETIME(11, 35, 4);` 返回： `-> 11:35:04`                                                                                                                                                                                                                                                                                                                                                                                                                |
| MICROSECOND(date)                 | 返回日期所对应的微秒数                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `SELECT MICROSECOND("2017-06-20 09:34:00.000023");` 返回： `-> 23`                                                                                                                                                                                                                                                                                                                                                                                                |
| MINUTE(t)                         | 返回t中的分钟值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SELECT MINUTE('1:2:3');` 返回： ` -> 2`                                                                                                                                                                                                                                                                                                                                                                                                                          |
| MONTHNAME(d)                      | 返回日期当中的月份名称，如 November                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT MONTHNAME('2011-11-11 11:11:11');` 返回： `-> November`                                                                                                                                                                                                                                                                                                                                                                                                   |
| MONTH(d)                          | 返回日期d中的月份值，1到12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `SELECT MONTH('2011-11-11 11:11:11');` 返回： `->11`                                                                                                                                                                                                                                                                                                                                                                                                              |
| NOW()                             | 返回当前日期和时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT NOW()` 返回： `-> 2018-09-19 20:57:43`                                                                                                                                                                                                                                                                                                                                                                                                                    |
| PERIOD_ADD(period, number)        | 为年-月组合日期添加一个时段                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `SELECT PERIOD_ADD(201703, 5); ` 返回： `-> 201708`                                                                                                                                                                                                                                                                                                                                                                                                               |
| PERIOD_DIFF(period1, period2)     | 返回两个时段之间的月份差值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `SELECT PERIOD_DIFF(201710, 201703);` 返回： `-> 7`                                                                                                                                                                                                                                                                                                                                                                                                               |
| QUARTER(d)                        | 返回日期d是第几季度，返回1到4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `SELECT QUARTER('2011-11-11 11:11:11');` 返回： `-> 4`                                                                                                                                                                                                                                                                                                                                                                                                            |
| SECOND(t)                         | 返回t中的秒钟值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SELECT SECOND('1:2:3')` 返回： `-> 3`                                                                                                                                                                                                                                                                                                                                                                                                                            |
| SEC_TO_TIME(s)                    | 将以秒为单位的时间s转换为时分秒的格式                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `SELECT SEC_TO_TIME(4320);` 返回： `-> 01:12:00`                                                                                                                                                                                                                                                                                                                                                                                                                  |
| STR_TO_DATE(string, format_mask)  | 将字符串转变为日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT STR_TO_DATE("August 10 2017", "%M %d %Y");` 返回： `-> 2017-08-10`                                                                                                                                                                                                                                                                                                                                                                                        |
| SUBDATE(d,n)                      | 日期d减去n天后的日期                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `SELECT SUBDATE('2011-11-11 11:11:11', 1);` 返回： `->2011-11-10 11:11:11 (默认是天)`                                                                                                                                                                                                                                                                                                                                                                                 |
| SUBTIME(t,n)                      | 时间t减去n秒的时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `SELECT SUBTIME('2011-11-11 11:11:11', 5);` 返回： `->2011-11-11 11:11:06 (秒)`                                                                                                                                                                                                                                                                                                                                                                                    |
| SYSDATE()                         | 返回当前日期和时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `SELECT SYSDATE();` 返回： `-> 2018-09-19 20:57:43`                                                                                                                                                                                                                                                                                                                                                                                                               |
| TIME(expression)                  | 提取传入表达式的时间部分                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `SELECT TIME("19:30:10");` 返回： `-> 19:30:10`                                                                                                                                                                                                                                                                                                                                                                                                                   |
| TIME_FORMAT(t,f)                  | 按表达式f的要求显示时间t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `SELECT TIME_FORMAT('11:11:11','%r');` 返回： `-> 11:11:11 AM`                                                                                                                                                                                                                                                                                                                                                                                                    |
| TIME_TO_SEC(t)                    | 将时间t转换为秒                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SELECT TIME_TO_SEC('1:12:00');` 返回： `-> 4320`                                                                                                                                                                                                                                                                                                                                                                                                                 |
| TIMEDIFF(time1, time2)            | 计算时间差值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT TIMEDIFF("13:10:11", "13:10:10");` 返回： `-> 00:00:01`                                                                                                                                                                                                                                                                                                                                                                                                   |
| TIMESTAMP(expression, interval)   | 单个参数时，函数返回日期或日期时间表达式；有2个参数时，将参数加和                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `SELECT TIMESTAMP("2017-07-23", "13:10:11");` 返回： `-> 2017-07-23 13:10:11`                                                                                                                                                                                                                                                                                                                                                                                     |
| TO_DAYS(d)                        | 计算日期d距离0000年1月1日的天数                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `SELECT TO_DAYS('0001-01-01 01:01:01');` 返回： `-> 366`                                                                                                                                                                                                                                                                                                                                                                                                          |
| WEEK(d)                           | 计算日期d是本年的第几个星期，范围是0到53                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT WEEK('2011-11-11 11:11:11');` 返回： `-> 45`                                                                                                                                                                                                                                                                                                                                                                                                              |
| WEEKDAY(d)                        | 日期d是星期几，0表示星期一，1表示星期二                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `SELECT WEEKDAY("2017-06-15");` 返回： `-> 3`                                                                                                                                                                                                                                                                                                                                                                                                                     |
| WEEKOFYEAR(d)                     | 计算日期d是本年的第几个星期，范围是0到53                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `SELECT WEEKOFYEAR('2011-11-11 11:11:11');` 返回： `-> 45`                                                                                                                                                                                                                                                                                                                                                                                                        |
| YEAR(d)                           | 返回年份                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `SELECT YEAR("2017-06-15");` 返回： `-> 2017`                                                                                                                                                                                                                                                                                                                                                                                                                     |
| YEARWEEK(date, mode)              | 返回年份及第几周（0到53），mode中0表示周天，1表示周一，以此类推                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `SELECT YEARWEEK("2017-06-15"); ` 返回： `-> 201724`                                                                                                                                                                                                                                                                                                                                                                                                              |


